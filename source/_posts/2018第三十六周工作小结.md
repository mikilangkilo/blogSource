---
title: 2018第三十六周工作小结
date: 2018-09-16 22:51:04
tags: 工作小结
---

本周主要任务是2.2.1的迭代计划，自从2.2.0发版以后，小程序端，ios端的进度都大大落后于android。我们也进入了喜闻乐见的等进度阶段。

本周个人主要负责商品详情页面的优化。这次主要是借鉴淘宝的布局，做了较大量的优化。

优化方面一是接口部分的抽离，将逻辑部分放在p层，视图放在v层，隔离开来，逻辑因此较为清晰，对比前人的过程式编程，感觉光编译器编译都快了很多。

优化第二方面是布局的优化，还是老样子，一层constaintlayout解决问题。从爆红的过度绘制一下子变成了淡绿，打开页面的速度也快了很多。

优化第三方面是父类的精简，经过仔细排查，最终抽丝剥茧下来了一个比较简单的activitybase，上层是rxactivity，在上层就是appcompatactivity。对比之前的fragmeng->appbasefragment->basefragment->rxbasefragment,以及对应的activity，光这一方面就精简了8层。打开速度快也不是没有原因的。

优化第四方面是接口的生命周期绑定，之前只是在ondestroy中集中处理了接口，但是大部分的跳转，切换，接口并未做处理，这样在接口请求时切换了，就造成了泄漏。这次直接统一compose到了rxlifecycle中，连destroy中都不需要处理。

不过这次让做一个属性动画，加入购物车的时候进行弹跳的一个动画布局，我搞了2天，原本准备搞个抛物线结束，结果三点计算抛物线公式忘了，自己推了2个小时，还推了个错的，debug了半天才发现。之后和ios商量，他们说应该用贝塞尔曲线，我又去翻以前的贝塞尔曲线的笔记，结果公式是以前就总结好的，但是好像是错的，怎么画都不对头。网上找了一圈还是没找到相关的对的例子。明天上班的时候去和ios的讨论讨论。

以上为本周的工作内容。

最近沉迷dnf无法自拔，结果今天给封号了一天，日。